@if (showForm) {
<div class="pozadi">
    <div class="overlay">
        <button (click)="showForm = false">X</button>
        <div class="text">
            <p>Chcete přesunout do košíku nebo pokračovat v nákupu?</p>
        </div>
        <hr>
        <div class="buttons">
            <button class="pokracovat" (click)="showForm = false">Pokračovat v nákupu</button>
            <button class="presunout" routerLink="/kosik">Přesunout do košíku</button>
        </div>
    </div>
</div>
}
<div class="container">
        <div class="ohraniceni">
            <div class="kniha-container">
            @if (book) {
            <div class="obrazek">
                @if (book.hasImage) {
                <img [src]="bookService.rootUrl + '/api/book/image/' + book.id" alt="{{ book.name }}">
                } @else {
                <div class="no-image">
                    <i class="fas fa-book ikona" style="font-size: 48px; color: #999;"></i>
                </div>
                }
            </div>
            <div class="zbytek">
                <div class="nadpis">
                    <h1> {{ book.name }}</h1>
                </div>
                <div class="autor">
                    <h2>{{ book.author.firstName }} {{book.author.lastName}}</h2>
                </div>
                <hr>
                <h4>Popis Knihy: </h4>
                <div class="genres">
                    @for (genre of book.genres; track genre.id) {
                    <span class="genre-tag">{{ genre.name }}</span>
                    }
                </div>
                <div class="popis">
                    <p> {{ book.summary }} </p>
                </div>
                <hr>
                <!-- TODO průměrné hodnocení knihy -->
                <h4>Dodatečné Informace: </h4>
                <div class="dodatecneinfo">
                    <h4>Průměrné hodnocení: {{book.averageRating}}</h4>
                    <h4> ISBN: {{ book.isbn }} </h4>
                    <h4> Datum vydání: {{book.published | date:'dd.MM.yyyy' }}</h4>
                </div>
                <hr>
                <div class="cena">
                    <h4>Cena: </h4>
                    <h3 class="cenaCislo">{{book.price}},-</h3>
                </div>
                <hr>
                <button class="pridatCartCudl" (click)="handleCartButton()" [disabled]="isCartButtonDisabled()">{{
                    isInCart ? 'Odebrat z košíku' : 'Přidat do košíku' }}</button>

                <button class="pridatWishCudl" (click)="handleWishButton()" [disabled]="isWishButtonDisabled()">{{
                    isInWish ? 'Odebrat ze seznamu přání' : 'Přidat do Seznamu přání' }}</button>
            </div>
            }
            </div>
            <hr>
            <!-- Sekce pro recenze -->
            <div class="reviews-section">
                <h2>Recenze</h2>

                <!-- Formulář pro přidání recenze -->
                <div class="review-form">
                    <h3>Přidat recenci</h3>
                    <div class="rating-input">
                        <span>Hodnocení:</span>
                        <select [(ngModel)]="reviewRating">
                            <option value="1">1 hvězdička</option>
                            <option value="2">2 hvězdičky</option>
                            <option value="3">3 hvězdičky</option>
                            <option value="4">4 hvězdičky</option>
                            <option value="5">5 hvězdiček</option>
                        </select>
                    </div>
                    <textarea placeholder="Napište svoji recenzi..." class="review-textarea" [(ngModel)]="reviewText"></textarea>
                    <button class="submit-review" (click)="submitReview()">Odeslat recenzi</button>
                </div>

                <!-- Seznam existujících recenzí -->
                <div class="reviews-list">
                    <h3>Všechny recenze</h3>
                    <br>
                    @for (review of reviews; track review.id) {
                    <div class="review-item">
                        <div class="review-header">
                            <span class="review-author">{{ review.user.firstName }} {{ review.user.lastName }}</span>
                            <span class="review-rating">{{ review.stars }}/5</span>
                        </div>
                        <hr>
                        <p class="review-text">{{ review.text }}</p>
                    </div>
                    }
                </div>
            </div>
        </div>
</div>
